<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网页时钟聊天室</title>
    <link rel="stylesheet" href="style.css">
    <!-- 添加Supabase客户端库 -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- 引入本地安装的GoEasy包 -->
    <script src="./goeasy.min.js"></script>
    
    <!-- 时钟界面 -->
    <div id="clock-container" class="container">
        <h1>网页时钟</h1>
        <div class="clock">
            <div id="time">00:00:00</div>
            <div id="date">2023-01-01</div>
            <div id="day">星期日</div>
            <p class="hint">长按时间区域输入6位数字进入聊天室</p>
        </div>
    </div>

    <!-- 聊天室列表界面 -->
    <div id="input-container" class="container hidden">
        <h2>我的聊天室</h2>
        <button id="add-new-room" class="add-room-button">添加新聊天室</button>
        <div id="room-list" class="room-list">
            <!-- 聊天室列表将通过JavaScript动态生成 -->
            <div class="room-list-placeholder">暂无进入过的聊天室</div>
        </div>
        <button id="back-to-clock" class="back-button">返回时钟</button>
    </div>

    <!-- 用户信息设置界面 -->
    <div id="user-info-container" class="container hidden">
        <h2>完善个人信息</h2>
        <div class="user-info-form">
            <div class="form-group">
                <label for="user-name">昵称：</label>
                <input type="text" id="user-name" placeholder="请输入昵称">
            </div>
            
            <div class="form-group">
                <label>性别：</label>
                <div class="gender-options">
                    <label><input type="radio" name="gender" value="male" checked> 男</label>
                    <label><input type="radio" name="gender" value="female"> 女</label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="user-region">地域：</label>
                <select id="user-region">
                    <option value="北京">北京</option>
                    <option value="上海">上海</option>
                    <option value="广州">广州</option>
                    <option value="深圳">深圳</option>
                    <option value="杭州">杭州</option>
                    <option value="南京">南京</option>
                    <option value="成都">成都</option>
                    <option value="武汉">武汉</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="user-age">年龄：</label>
                <input type="number" id="user-age" min="1" max="120" placeholder="请输入年龄">
            </div>
            
            <div class="form-group">
                <label>头像：</label>
                <div class="avatar-section">
                    <img id="user-avatar" src="" alt="用户头像" class="avatar">
                    <button id="change-avatar-btn" class="change-avatar-btn">更换头像</button>
                </div>
            </div>
            
            <!-- 游客状态提示 -->
            <div class="visitor-notice">
                <p class="notice-text">💡 提示：您当前是随机游客，用户数据可能丢失，建议您<a href="#" id="register-link" class="register-link">注册</a>账号。</p>
            </div>
            
            <div class="form-actions">
                <button id="save-user-info-btn" class="save-button">保存信息并进入聊天室</button>
            </div>
        </div>
    </div>

    <!-- 抽屉遮罩层 -->
    <div id="drawer-overlay" class="drawer-overlay"></div>

    <!-- 用户信息抽屉 -->
    <div id="user-info-drawer" class="drawer">
        <div class="drawer-header">
            <h3>个人信息</h3>
            <button id="close-drawer" class="close-drawer-btn">×</button>
        </div>
        <div class="drawer-content">
            <div class="user-avatar-large">
                <img id="drawer-user-avatar" src="" alt="用户头像">
            </div>
            <div class="user-info-item">
                <span class="info-label">昵称：</span>
                <span id="drawer-user-name"></span>
            </div>
            <div class="user-info-item">
                <span class="info-label">性别：</span>
                <span id="drawer-user-gender"></span>
            </div>
            <div class="user-info-item">
                <span class="info-label">地域：</span>
                <span id="drawer-user-region"></span>
            </div>
            <div class="user-info-item">
                <span class="info-label">年龄：</span>
                <span id="drawer-user-age"></span>
            </div>
            
            <!-- 修改个人信息按钮 -->
            <div class="drawer-actions">
                <button id="edit-user-info-btn" class="edit-button">修改个人信息</button>
            </div>
        </div>
    </div>

    <!-- 聊天室界面 -->
    <div id="chat-container" class="container hidden">
        <div class="chat-header">
            <div class="chat-header-left">
                <button id="my-page-btn" class="my-page-button">我的页面</button>
                <h2>聊天室 <span id="current-room"></span></h2>
            </div>
            <button id="leave-chat" class="leave-button">离开聊天室</button>
        </div>
        <div id="messages" class="messages"></div>
        <div class="chat-input-area">
            <input type="text" id="message-input" placeholder="输入消息...">
            <button id="send-message" class="send-button">发送</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>